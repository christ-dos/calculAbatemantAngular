<div class="container " id="main-container">
    <!-- <ng-container *ngIf="errorMsg">
        <div class="alert alert-warning d-flex align-items-center mt-2 p-2 d-print-none">
            <span class="material-icons color-gray mr-2">error</span>
            {{errorMsg}}
            <span class="material-icons color-gray ml-auto" (click)="hideError()">close</span>
        </div>
    </ng-container> -->
    <div class="col-xl-1 col-lg-1 col-md-2 col-sm-3 col-4 rounded-circle bg-light-pink bg-gradient shadow d-none d-print-block"
        id="logo">
        <a class="navbar-brand" href="#">
            <img src="./assets/logoAppAssMat.png" class="img-fluid ml-2" />
        </a>
    </div>
    <div class="text-secondary row justify-content-center">
        <div class="col-1 pt-2 px-2 d-print-none">
            <mat-icon class="fs-1 text-secondary" routerLink="home">arrow_circle_left</mat-icon>
        </div>
        <div class="col-10 pt-2 mb-2 d-flex justify-content-center" id="child-details-title">
            <h2 class="font-italic shadow rounded-pill px-3 d-print-block">Détails de l'enfant</h2>
        </div>
        <div class="col-1  d-flex justify-content-end pr-1 d-print-none">
            <button class="btn pr-0" printTitle="Recapitulatif annuel" [useExistingCss]="true"
                printSectionId="main-container" ngxPrint>
                <span class="material-icons fs-2 p-2 shadow rounded text-secondary">print</span>
            </button>
        </div>
    </div>
    <div class="row border border-info shadow pb-2 mb-2">
        <div class="row align-items-end pb-0">
            <label for="firstname" class="col-2 col-sm-1 col-md-2 col-lg-2 mr-sm-0 col-form-label">Prénom: </label>
            <div class="col-10 col-sm-4 col-md-4 col-lg-4">
                <input type="text" readonly
                    class="form-control-plaintext text-info fs-6 pl-5 pl-sm-5 pl-md-0 font-weight-bold" id="firstname"
                    value="{{childDetails?.firstname}}">
            </div>
            <label for="lastname" class="col-2 col-sm-1 col-md-2 col-lg-2 py-0 col-form-label pb-1">Nom:</label>
            <div class="col-10 col-sm-4 col-md-4 col-lg-4 pl-md-0 pt-0">
                <input type="text" readonly
                    class="form-control-plaintext text-info fs-6 pb-1 pl-5 pl-sm-5 pl-md-0 pb-0 font-weight-bold"
                    id="lastname" value="{{childDetails?.lastname}}">
            </div>
        </div>
        <div class="row align-items-end pb-1">
            <label for="birthDate" class="col-2 col-sm-2 col-md-2 col-lg-2 col-form-label pb-0">Date de
                Naissance:</label>
            <div class="col-4 col-sm-3 col-md-9 col-lg-4 pl-md-0">
                <input type="text" readonly class="form-control-plaintext text-info pb-0 pl-2 pl-sm-1 pl-md-3"
                    id="birthDate" value="{{childDetails?.birthDate}}">
            </div>
        </div>
        <hr class="my-1 px-0">
        <div class="row align-items-end pb-1 ">
            <label for="beginContract" class="col-2 col-sm-2 col-md-2 col-lg-2 col-form-label pb-0 ">Début Contrat:
            </label>
            <div class="col-4 col-sm-3 col-md-4 col-lg-4 pl-md-0 ">
                <input type="text" readonly class="form-control-plaintext text-info pb-0 pl-2 pl-sm-1 pl-md-3"
                    id="beginContract" value="{{childDetails?.beginContract}}">
            </div>
            <label for="endContract" class="col-2 col-sm-2 col-md-2 col-lg-2 col-form-label pb-0">Fin Contrat: </label>
            <div class="col-4 col-sm-3 col-md-4 col-lg-4 p-0 ">
                <input type="text" readonly class="form-control-plaintext text-info pb-0 pl-2 pl-sm-0 pl-md-0"
                    id="endContract" value="{{childDetails?.endContract}}">
            </div>
        </div>
        <div class="row align-items-end pb-md-1">
            <label for="feesLunch" class="col-2 col-sm-2 col-md-2 col-lg-2 col-form-label pb-0">Frais Repas: </label>
            <div class="col-4 col-sm-3 col-md-4 col-lg-4">
                <input type="text" readonly class="form-control-plaintext text-info pb-0 pl-2 pl-sm-1 pl-0"
                    id="feesLunch" value="{{childDetails?.feesLunch | currency: 'EUR' }}">
            </div>
            <label for="feesSnacks" class="col-2 col-sm-2 col-md-2 col-lg-2 col-form-label pb-0">Frais Goûter: </label>
            <div class="col-4 col-sm-3 col-md-4 col-lg-4 pl-0 pl-lg-0">
                <input type="text" readonly class="form-control-plaintext text-info pb-0" id="feesSnacks"
                    value="{{childDetails?.feesSnack | currency: 'EUR'}}">
            </div>
        </div>
        <div class="row align-items-end pb-1">
            <label for="taxableSalary" class="col-2 col-sm-2 col-md-2 col-lg-2 mr-sm-0 col-form-label pb-0">Salaire
                Imposable: </label>
            <div class="col-4 col-sm-3 col-md-4 col-lg-4 pl-4 pl-lg-3">
                <input type="text" readonly class="form-control-plaintext text-info pb-0" id="taxableSalary"
                    value="{{childDetails?.taxableSalary | currency: 'EUR'}}">
            </div>
            <label for="taxRelief" class="col-2 col-sm-2  col-md-2 col-lg-2 col-form-label pb-0">Abatement
                Fiscal:</label>
            <div class="col-4 col-sm-3 col-md-4 col-lg-4 pl-0">
                <input type="text" readonly class="form-control-plaintext text-info pb-0" id="taxRelief"
                    value="{{childDetails?.taxRelief | currency: 'EUR'}}">
            </div>
        </div>
        <div class="row align-items-end pb-1">
            <label for="reportableAmounts" class="col-2 col-sm-2 col-md-2 col-lg-2 col-form-label pb-0 ">Somme à
                déclarer:</label>
            <div class="col-4 col-sm-4 col-md-4 col-lg-2 pl-0">
                <input type="text" readonly
                    class="form-control-plaintext text-info bg-light-magenta rounded-pill pb-0 font-weight-bold pl-4 pl-lg-3 py-1"
                    id="reportableAmounts" value="{{childDetails?.reportableAmounts| currency: 'EUR'}}">
            </div>
        </div>
    </div>
    <!--Form to filter the monthlies-->
    <form #filterMonthliesForm="ngForm" (ngSubmit)="this.onGetMonthliesByYearAndChildId(filterMonthliesForm)">
        <div class="row pb-1 d-print-none d-flex align-items-start">
            <div class="col-2 col-lg-1 border border-secondary shadow-sm rounded-pill justify-content-center d-flex">
                <span (click)="calculAbatementMonthlyComponent.onOpenModel(childDetails,'addMonthly')"
                    class="material-icons color-pink fs-2 py-1" 
                    data-md-tooltip="Déclaration Mensuelle" id="AddMonthly"
                    name="AddMonthly">post_add
                </span>
            </div>
            <div class="col-10 col-lg-11 pr-0  d-flex justify-content-end align-items-start">
                <div class="col-8 d-flex flex-column align-items-end pr-0">
                    <input type="text" name="year" 
                        maxlength="4"
                        minlength="4" 
                        pattern="[0-9]{4}"
                        class=" col-5 col-lg-2 form-control-plaintext border border-secondary rounded-pill mr-2  px-auto shadow-sm"
                        ngModel id="year" placeholder="Année" 
                        required 
                        #yearFilterVar="ngModel" 
                        [ngClass]="{'is-invalid' : (yearFilterVar?.touched || yearFilterVar?.dirty) 
                            && !yearFilterVar?.valid,
                                    'is-valid'  : yearFilterVar?.valid
                                }"/>
                    <div *ngIf="yearFilterVar?.hasError('required')"
                        class=" invalid-feedback col-6 col-sm-5 col-md-5 col-lg-2 pl-4 pl-sm-1 pl-md-0 pr-lg-0 alert alert-danger p-0 mb-0">
                        <span>Entrer une année</span>
                    </div>
                    <div *ngIf="yearFilterVar?.hasError('minlength')"
                        class=" invalid-feedback col-6 col-sm-5 col-md-5 col-lg-2 pl-4 pl-sm-1 pl-md-0 pr-lg-0 alert alert-danger p-0 mb-0">
                        <span>4 caractères min</span>

                    </div>
                    <div *ngIf="yearFilterVar?.hasError('pattern')"
                        class=" invalid-feedback col-6 col-sm-5 col-md-5 col-lg-2 pl-4 pl-sm-1 pl-md-0 pr-lg-0 p-0 mb-0">
                        <span>Entrer un nombre</span>
                    </div>
                </div>
                <button
                    class=" col-2 col-lg-1 btn border border-secondary rounded-pill d-flex justify-content-center shadow-lg btn-block"
                    type="submit" id="filter-monthlies" [disabled]="filterMonthliesForm.invalid">
                    <mat-icon class="fs-4 text-secondary px-auto" data-md-tooltip="Filtrer" name="filterIcon"
                        id="filterIcon">filter_alt</mat-icon>
                </button>
            </div>
        </div>
    </form>

    <div class="row" id="rowTable">
        <table class="table table-condensed table-striped borderless shadow mb-0">
            <thead class="thead bg-magenta text-light">
                <tr>
                    <th scope="col" class="py-4 text-center">Mois</th>
                    <th scope="col" class="py-4 text-center">Year</th>
                    <th scope="col" class="py-4 text-center">Salaire Imposable</th>
                    <th scope="col" class="py-4 text-center">Jours</th>
                    <th scope="col" class="py-4 text-center">Heures</th>
                    <th scope="col" class="py-4 text-center">Repas</th>
                    <th scope="col" class="py-4 text-center">Goûters</th>
                    <th scope="col" class="py-4 text-center d-print-none">Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let monthly of childDetails.monthlies ?? [] | paginate: { itemsPerPage: 12, currentPage: page }">
                    <td class="text-center bg-magenta color-light-gray" id="table-td-month">{{monthly?.month}}</td>
                    <td class="text-center  bg-light-magenta color-gray">{{monthly?.year}}</td>
                    <td class="text-center">{{monthly?.taxableSalary | currency: 'EUR'}} </td>
                    <td class="text-center">{{monthly?.dayWorked}}</td>
                    <td class="text-center">{{monthly?.hoursWorked}}</td>
                    <td class="text-center">{{monthly?.lunch}}</td>
                    <td class="text-center">{{monthly?.snack}}</td>
                    <td style="width: 15%" class="text-center d-print-none">
                        <a (click)="this.onOpenModel(monthly,'editMonthly')" class="btn tooltips" data-placement="top"
                            data-original-title="Edit">
                            <i class="fa fa-pencil text-danger "></i>
                        </a>
                        <a (click)="this.onOpenModel(monthly,'deleteMonthly')" class="btn tooltips" data-placement="top"
                            data-original-title="Delete">
                            <i class="fa fa-trash text-secondary"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
            <tfoot *ngIf="sumTaxableSalary">
                <tr>
                    <td class="text-center bg-middle-magenta text-secondary font-weight-bold"
                        id="table-label-total-annuel">Total Annuel</td>
                    <td class="text-center font-weight-bold bg-light-magenta"></td>
                    <td class="text-center font-weight-bold bg-light-magenta">{{sumTaxableSalary | currency: 'EUR'}}
                    </td>
                    <td class="text-center font-weight-bold bg-light-magenta">{{sumDaysWorked}}</td>
                    <td class="text-center font-weight-bold bg-light-magenta">{{sumHoursWorked}}</td>
                    <td class="text-center font-weight-bold bg-light-magenta">{{sumLunches}}</td>
                    <td class="text-center font-weight-bold bg-light-magenta">{{sumSnacks}}</td>
                    <td class="text-center font-weight-bold bg-light-magenta d-print-none"></td>
                </tr>
            </tfoot>
        </table>
        <div class="row mx-1 pl-3 pt-2">
            <pagination-controls (pageChange)="page = $event" previousLabel="Précedent" nextLabel="Suivant"
                [autoHide]="true" [responsive]="true" class="fs-6 text-center text-info my-pagination">
            </pagination-controls>
        </div>

    </div>
</div>

<!-- Add Monthly Modal -->
<div class="modal fade" id="addMonthlyModal" tabindex="-1" role="dialog" aria-labelledby="addMonthlyModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header bg-danger bg-gradient text-light">
                <h2 class="modal-title" id="addMonthlyModalLabel">Ajouter Déclaration Mensuelle</h2>
                <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form novalidate (ngSubmit)="onAddMonthly()" [formGroup]="addMonthlyInChildDetailsForm">
                    <div class="form-group row">
                        <div class="col-6">
                            <label for="month">Mois</label>
                            <select class="form-select form-group mb-0" aria-label="MonthSelect" id="month"
                                formControlName="month" [ngClass]="{'is-invalid':(addMonthlyInChildDetailsForm.get('month')?.touched && addMonthlyInChildDetailsForm.get('month')?.pristine),
                                'is-valid': addMonthlyInChildDetailsForm.get('month')?.valid}">
                                <option *ngFor="let month of this.calculAbatementMonthlyComponent.months"
                                    [ngValue]="month" name="monthSelected" id="monthSelected">{{month}}
                                </option>
                            </select>
                            <div *ngIf="addMonthlyInChildDetailsForm.get('month')?.pristine && addMonthlyInChildDetailsForm.get('month')?.invalid"
                                class="invalid-feedback pl-1 p-0">
                                <span>Selectionner le mois</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <label for="year">Année</label>
                            <input type="text" ng-pattern="/0-9/" class="form-control" id="year" placeholder="2022"
                                formControlName="year" [ngClass]="{'is-invalid': addMonthlyInChildDetailsForm.get('year')?.dirty && addMonthlyInChildDetailsForm.get('year')?.invalid,
                                        'is-valid':addMonthlyInChildDetailsForm.get('year')?.valid
                              }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row  d-flex align-items-end">
                        <div class="col-6">
                            <label for="taxableSalary">Salaire Imposable</label>
                            <input type="number" name="taxableSalary" class="form-control" id="taxableSalary"
                                placeholder="650.20 €" formControlName="taxableSalary" [ngClass]="{'is-invalid': addMonthlyInChildDetailsForm.get('taxableSalary')?.dirty && addMonthlyInChildDetailsForm.get('taxableSalary')?.invalid,
                                'is-valid': addMonthlyInChildDetailsForm.get('taxableSalary')?.dirty && addMonthlyInChildDetailsForm.get('taxableSalary')?.valid
                                }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <label for="calcul-taxable-salary-sibling-form" class="d-inline-block text-truncate">Salaire
                                Imposable Fraterie</label>
                            <button (click)="calculAbatementMonthlyComponent.onOpenModel(null,'taxableSalarySibling')"
                                type="button" id="calcul-taxable-salary-sibling-form"
                                class="btn btn-danger d-inline-block text-truncate m-0" data-toggle="modal">Calculer
                            </button>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-6">
                            <label for="dayWorked">Jours (plus de 8h par jour)</label>
                            <input type="number" class="form-control" id="dayWorked" placeholder="20"
                                formControlName="dayWorked" [ngClass]="{'is-invalid':addMonthlyInChildDetailsForm.get('dayWorked')?.dirty &&  addMonthlyInChildDetailsForm.get('dayWorked')?.invalid,
                                'is-valid': addMonthlyInChildDetailsForm.get('dayWorked')?.dirty && addMonthlyInChildDetailsForm.get('dayWorked')?.valid
                                }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <label for="hoursWorked">Heures (moins de 8h par jour)</label>
                            <input type="number" name="hoursWorked" class="form-control" id="hoursWorked"
                                placeholder="8.00" formControlName="hoursWorked" [ngClass]="{'is-invalid':addMonthlyInChildDetailsForm.get('hoursWorked')?.dirty &&  addMonthlyInChildDetailsForm.get('hoursWorked')?.invalid,
                                'is-valid': addMonthlyInChildDetailsForm.get('hoursWorked')?.dirty && addMonthlyInChildDetailsForm.get('hoursWorked')?.valid
                            }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-6">
                            <label for="lunch">Repas</label>
                            <input type="number" name="lunch" class="form-control" id="lunch" placeholder="20"
                                formControlName="lunch" [ngClass]="{'is-invalid':addMonthlyInChildDetailsForm.get('lunch')?.dirty &&  addMonthlyInChildDetailsForm.get('lunch')?.invalid,
                                'is-valid': addMonthlyInChildDetailsForm.get('lunch')?.dirty && addMonthlyInChildDetailsForm.get('lunch')?.valid
                                }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <label for="snack">Goûters</label>
                            <input type="number" name="snack" class="form-control" id="snack" placeholder="20"
                                formControlName="snack" [ngClass]="{'is-invalid':addMonthlyInChildDetailsForm.get('snack')?.dirty &&  addMonthlyInChildDetailsForm.get('snack')?.invalid,
                                'is-valid': addMonthlyInChildDetailsForm.get('snack')?.dirty && addMonthlyInChildDetailsForm.get('snack')?.valid
                                }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>

                            <!-- <input type="hidden" name="childId" class="form-control"
                                id="childId" placeholder="ChildId" formControlName="childId"> -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" id="cancel-add-Monthly-form" class="btn btn-secondary"
                            data-dismiss="modal">Annuler</button>
                        <button [disabled]="addMonthlyInChildDetailsForm.invalid" type="submit"
                            class="btn bg-danger text-light">Enregistrer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Add Monthly Modal end -->

 <!-- Calculate Taxable Salary Sibling Modal -->
 <div class="modal fade" id="taxableSalarySiblingModal" tabindex="-1" role="dialog"
 aria-labelledby="taxableSalarySiblingModalLabel" aria-hidden="true">
 <div class="modal-dialog" role="document">
    <div class="modal-content">
       <div class="modal-header bg-gradient text-light" style="background-color: rgba(206, 50, 50, 0.856);">
          <h2 class="modal-title" id="taxableSalarySiblingModalLabel">Calculer Salaire Imposable net (cas fraterie)
          </h2>
          <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close"
             style="background-color: rgba(206, 50, 50, 0.856);">
             <span aria-hidden="true">&times;</span>
          </button>
       </div>
       <div class="modal-body">
          <form novalidate [formGroup]="taxableSalarySiblingForm"
             (ngSubmit)="onCalculateTaxableSalarySibling()">
             <div class="form-group row">
                <div class="col-4">
                   <label for="netSalary" class="d-inline-block text-truncate">Salaire net</label>
                   <input type="number" 
                      class="form-control" id="netSalary"
                      placeholder="600.20€"
                      formControlName="netSalary" 
                      [ngClass]="{'is-invalid':(taxableSalarySiblingForm.get('netSalary')?.dirty || taxableSalarySiblingForm.get('netSalary')?.touched)  &&  taxableSalarySiblingForm.get('netSalary')?.invalid,
                         'is-valid': taxableSalarySiblingForm.get('netSalary')?.dirty && taxableSalarySiblingForm.get('netSalary')?.valid
                      }" />
                     
                   <div class="invalid-feedback pl-1">
                      <span>{{errorsValidation}}</span>
                   </div>
                </div>
                <div class="col-4">
                   <label for="maintenanceCost" class="d-inline-block text-truncate">Frais Entretiens</label>
                   <input type="number" 
                      class="form-control" 
                      id="maintenanceCost"
                      placeholder="30.50€"
                      formControlName="maintenanceCost" 
                      [ngClass]="{'is-invalid':(taxableSalarySiblingForm.get('maintenanceCost')?.dirty || taxableSalarySiblingForm.get('maintenanceCost')?.touched)  
                         &&  taxableSalarySiblingForm.get('maintenanceCost')?.invalid,
                         'is-valid': taxableSalarySiblingForm.get('maintenanceCost')?.dirty && taxableSalarySiblingForm.get('maintenanceCost')?.valid
                      }" />

                   <div class="invalid-feedback pl-1">
                      <span>{{errorsValidation}}</span>
                   </div>
                </div>
                <div class="col-4">
                   <label for="netBrutCoefficient" class="d-inline-block text-truncate">Coeff. net/brut</label>
                   <input type="number" 
                      class="form-control"
                      id="netBrutCoefficient" 
                      placeholder="0.7001"
                      formControlName="netBrutCoefficient" 
                      [ngClass]="{'is-invalid':(taxableSalarySiblingForm.get('netBrutCoefficient')?.dirty || taxableSalarySiblingForm.get('netBrutCoefficient')?.touched) 
                          &&  taxableSalarySiblingForm.get('netBrutCoefficient')?.invalid,
                         'is-valid': taxableSalarySiblingForm.get('netBrutCoefficient')?.dirty && taxableSalarySiblingForm.get('netBrutCoefficient')?.valid
                      }" />

                   <div  *ngIf="!taxableSalarySiblingForm.get('netBrutCoefficient')?.hasError('pattern')" 
                      class="invalid-feedback pl-1">
                      <span>{{errorsValidation}}</span>
                   </div>
                   <div *ngIf="taxableSalarySiblingForm.get('netBrutCoefficient')?.hasError('pattern')"
                      class="invalid-feedback pl-1">
                      <span>Format du champ incorrect (0.7801)</span>
                   </div>
                </div>
             </div>

             <div class="modal-footer">
                <button type="button" id="cancel-taxable-salary-sibling-form" class="btn btn-secondary"
                   data-dismiss="modal">Annuler</button>
                <button [disabled]="taxableSalarySiblingForm.invalid" type="submit"
                   class="btn btn-danger">Enregistrer</button>
             </div>
          </form>
       </div>
    </div>
 </div>
</div>
<!-- Calculate Taxable Salary Sibling Modal -->


<!-- Edit Monthly Modal -->
<div class="modal fade" id="updateMonthlyModal" tabindex="-1" role="dialog" aria-labelledby="updateMonthlyModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header bg-danger bg-gradient text-light">
                <h2 class="modal-title" id="updateMonthlyModalLabel">Editer Déclaration Mensuelle de:
                    {{editMonthly?.month}} {{editMonthly?.year}}</h2>
                <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form novalidate [formGroup]="editMonthlyForm">
                    <div class="form-group row">
                        <div class="col-6">
                            <label for="month">Mois</label>
                            <select class="form-select form-group mb-0" aria-label="MonthSelect" 
                                id="month"
                                formControlName="month" 
                                [ngClass]="{'is-invalid':(editMonthlyForm.get('month')?.touched 
                                    && editMonthlyForm.get('month')?.pristine),
                                    'is-valid': editMonthlyForm.get('month')?.valid}">
                                <option *ngFor="let month of this.calculAbatementMonthlyComponent.months"
                                    [ngValue]="month" name="monthSelected" 
                                    id="monthSelected">{{month}}
                                </option>
                            </select>
                            <div *ngIf="editMonthlyForm.get('month')?.pristine 
                                && editMonthlyForm.get('month')?.invalid"
                                class="invalid-feedback pl-1 p-0">
                                <span>Selectionner le mois</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <label for="year">Année</label>
                            <input type="text" ng-pattern="/0-9/" class="form-control" 
                            id="year" placeholder="2022"
                            formControlName="year" 
                            [ngClass]="{'is-invalid': editMonthlyForm.get('year')?.dirty 
                                && editMonthlyForm.get('year')?.invalid,
                                'is-valid': editMonthlyForm.get('year')?.valid
                                }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-6">
                            <label for="taxableSalary">Salaire Imposable</label>
                            <input type="number" name="taxableSalary" 
                                class="form-control" id="taxableSalary"
                                placeholder="650.20 €" 
                                formControlName="taxableSalary" 
                                [ngClass]="{'is-invalid': editMonthlyForm.get('taxableSalary')?.dirty && editMonthlyForm.get('taxableSalary')?.invalid,
                                    'is-valid': editMonthlyForm.get('taxableSalary')?.dirty && editMonthlyForm.get('taxableSalary')?.valid
                                }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-6">
                            <label for="dayWorked">Jours (plus de 8h par jour)</label>
                            <input type="number"  class="form-control" id="dayWorked"
                                placeholder="20" 
                                formControlName="dayWorked"
                                [ngClass]="{'is-invalid': editMonthlyForm.get('dayWorked')?.dirty
                                &&  editMonthlyForm.get('dayWorked')?.invalid,
                                'is-valid': editMonthlyForm.get('dayWorked')?.dirty 
                                && editMonthlyForm.get('dayWorked')?.valid
                                }"/>
                            <div  class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div> 
                        </div>
                        <div class="col-6">
                            <label for="hoursWorked">Heures (moins de 8h par jour)</label>
                            <input type="number"  name="hoursWorked" class="form-control" id="hoursWorked"
                                placeholder="8.00" 
                                formControlName="hoursWorked"
                                [ngClass]="{'is-invalid': editMonthlyForm.get('hoursWorked')?.dirty 
                                &&  editMonthlyForm.get('hoursWorked')?.invalid,
                                'is-valid': editMonthlyForm.get('hoursWorked')?.dirty 
                                && editMonthlyForm.get('hoursWorked')?.valid
                                }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-6">
                            <label for="lunch">Repas</label>
                            <input type="number" name="lunch" class="form-control" id="lunch" placeholder="20"
                                formControlName="lunch"
                                [ngClass]="{'is-invalid': editMonthlyForm.get('lunch')?.dirty 
                                &&  editMonthlyForm.get('lunch')?.invalid,
                                'is-valid': editMonthlyForm.get('lunch')?.dirty 
                                && editMonthlyForm.get('lunch')?.valid
                                }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <label for="snack">Goûters</label>
                            <input type="number" name="snack" class="form-control" id="snack" placeholder="20"
                            formControlName="snack"
                            [ngClass]="{'is-invalid': editMonthlyForm.get('snack')?.dirty 
                            &&  editMonthlyForm.get('snack')?.invalid,
                            'is-valid': editMonthlyForm.get('snack')?.dirty && editMonthlyForm.get('snack')?.valid
                            }" />
                            <div class="invalid-feedback pl-1">
                                <span>{{errorsValidation}}</span>
                            </div>

                            <!-- <input type="hidden" ngModel="{{editMonthly?.childId}}" name="childId" class="form-control"
                                id="childId" placeholder="ChildId">
                            <input type="hidden" ngModel="{{editMonthly?.monthlyId}}" name="monthlyId"
                                class="form-control" id="monthlyId" placeholder="MonthlyId"> -->

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" id="cancel-edit-Monthly-form" 
                            class="btn btn-secondary"
                            data-dismiss="modal">Annuler
                        </button>
                        <button data-dismiss="modal" class="btn bg-danger text-light" 
                            (click)="onUpdateMonthly()"
                            [disabled]="editMonthlyForm.invalid">Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Edit Monthly Modal end -->

<!-- Delete Monthly Modal -->
<div class="modal fade" id="deleteMonthlyModal" tabindex="-1" role="dialog" aria-labelledby="deleteMonthlyModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header bg-danger bg-gradient text-light">
                <h2 class="modal-title" id="deleteMonthlyModalLabel">Supprimer une déclaration Mensuelle</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" class="text-light">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Etes-vous vraiment sûr de vouloir supprimer la declaration mensuelle de {{deleteMonthly?.month}}
                    {{deleteMonthly?.year}}? </p>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
                    <button (click)="onDeleteMonthly(deleteMonthly.monthlyId)" class="btn btn-danger"
                        data-dismiss="modal">Oui</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Delete Monthly Modal end -->

<!-- Notification for Child error-->
<div class="container">
    <div *ngIf="errorMsg" style="position: fixed; bottom: 0; right: 0;" 
          class="col-lg-12 col-md-12 col-xl-12 mt-5 px-5">
       <div class="alert alert-warning" role="alert">
          <h4 class="alert-heading d-flex align-items-end mb-1">Une erreur est survenue!
             <span class=" material-icons color-gray ml-auto" (click)="hideError()">close</span>
          </h4>
          <p class="d-flex align-items-end">
             <span class="material-icons color-gray mr-2 color-red">error</span>
             {{errorMsg}}
          </p>
         </div>
    </div>
 </div>

<!-- Notification for Child error end -->